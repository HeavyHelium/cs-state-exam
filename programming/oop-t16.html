<!DOCTYPE html><html><head>
      <title>oop-t16</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////home/helium/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.8.13/crossnote/dependencies/katex/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="тема-16-обектно-ориентирано-програмиране-основни-принципи-класове-и-обекти-наследяване-и-капсулация">Тема 16. Обектно-ориентирано програмиране. Основни принципи. Класове и обекти. Наследяване и капсулация </h1>
<h2 id="0-абстракция-със-структури-от-данни-класове-и-обекти">0. Абстракция със структури от данни. Класове и обекти. </h2>
<p>Основната идея на ООП е представяне на частите от решаваната задача като набор от <strong>обекти</strong>, които включват в себе си <strong>данни</strong>(член-данни, атрибути, полета) и <strong>методи</strong>(член-функции) за обработката на тези данни. Еднотипните обекти се групират в <strong>класове</strong>.</p>
<p>Клас - множество от функции и променливи, които са обвързани <em><strong>в обща логическа структура</strong></em>.<br>
Обект - съвкупност от елементи и тяхното поведение.</p>
<p><u><strong>Основните принципи на ООП</strong></u></p>
<ul>
<li><strong>Абстракция</strong> със структури от данни - <strong>представянето на данните е отделено от използването им</strong>
<ul>
<li>капсулация - ограничаване на достъпа</li>
</ul>
</li>
<li><strong>Отворена рекурсия</strong> - методите работят със собствените данни на обекта</li>
<li><strong>Наследяване</strong> - един клас от обекти може да разширява друг вече съществуващ клас като използва наготово функционалността му</li>
<li><strong>Генеричност</strong> - обработване на различни класове обекти по <em><strong>универсален начин</strong></em></li>
<li><strong>Полиморфизъм</strong> - обработване на различни класове обекти по <em><strong>специфичен за тях</strong></em> начин</li>
<li><strong>Динамично свързване</strong> - извиканият метод се определя <em><strong>по време на изпълнение</strong></em>, в зависимост от обекта, а не от класа, на който принадлежи</li>
</ul>
<h2 id="1-декларация-на-клас-и-декларация-на-обект">1. Декларация на клас и декларация на обект. </h2>
<p>Ще разгледаме класовете в C++.</p>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token operator">&lt;</span>име<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">&lt;</span>тяло<span class="token operator">&gt;</span>
<span class="token punctuation">}</span> inst1<span class="token punctuation">,</span> inst2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> instn<span class="token punctuation">;</span>
</code></pre><p><strong>Декларацията</strong> на класа се състои от име на класа и тяло, съдържащо декларации на член-функции и член-данни.<br>
Дефиницията на класа се състои освен от декларацията му, и от дефиницията на неговите методи, която може да е <strong>inline</strong> в тялото на класа, или извън декларацията на класа, когато имената им се предхождат от <code>&lt;име&gt;::</code>.</p>
<p>Член-данните и член-функциите могат да бъдат дефинирани с различни спецификатори за достъп - <code>private</code>, <code>public</code>, <code>protected</code>.</p>
<ul>
<li><code>private</code> - позволен е само вътрешен достъп на методите и полетата, обявени за <code>private</code>.</li>
<li><code>public</code> - позволен е и вътрешен и вънншен достъп</li>
<li><code>protected</code> -  вътршен достъп в класа и наследниците му.</li>
</ul>
<p>След като клас е дефиниран, може да се създават негови инстанции(екземпляри, обекти от класа).</p>
<p>Създаването на обекти е свързано с <strong>инициализиране</strong> на паметта на обекта по такъв начин, че той да бъде във валидно състояние, т.е. <em><strong>да бъдат в сила ограниченията, наложени от инварианта на класа</strong></em>.</p>
<h3 id="основни-видове-конструктори">Основни видове конструктори </h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token operator">&lt;</span>конструктор<span class="token operator">&gt;</span> <span class="token double-colon punctuation">::</span><span class="token operator">=</span> 
<span class="token operator">&lt;</span>име<span class="token operator">-</span>на<span class="token operator">-</span>клас<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token operator">&lt;</span>име<span class="token operator">-</span>на<span class="token operator">-</span>клас<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>параметри<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>член<span class="token operator">-</span>данна<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>израз<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">,</span> член<span class="token operator">-</span>данна<span class="token punctuation">(</span><span class="token operator">&lt;</span>израз<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>тяло<span class="token operator">&gt;</span><span class="token punctuation">}</span>
</code></pre><ol>
<li>Обикновен конструктор с параметри</li>
<li>Конструктор по подразбиране - конструктор без параметри; важно напр. при заделяне на масиви с new от елементи от класа</li>
<li>Конструктор с параметри по подразбиране - като 1, но има зададени параметри по подразбираnе</li>
<li>Конструктор за копиране - за инициализация на обект се използва като образец друг обект, приема параметър от тип <code>&lt;име на клас&gt; const&amp; </code></li>
<li>Системно генерирани конструктори
<ul>
<li>по подразбиране - ако в един клас не се дефинира нито един конструктор, системно се създава конструктор по подразбиране с празно тяло</li>
<li>за копиране - ако не е дефиниран конструктор за копиране, то системно се създава такъв, който копира дословно полетата на образеца(полетата, които са обекти на класове се копират посредством копиращите си конструктори, а другите чрез копиране на стойностите в паметта)</li>
</ul>
</li>
<li>Конструктор за преобразуване на тип(конвертиращ конструктор) - конструкторите с точно един параметър са специални,  т.к. задават <strong>правило</strong> за конструиране на обект от класа по обект от друг клас, или от стойност от вграден тип. Навсякъде, където се очаква обект от клас A, но се подава стойност от тип B, C++ се оптива да използва конструктор за преобразуване на тип от вида A(B)</li>
</ol>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span>

<span class="token keyword keyword-private">private</span><span class="token operator">:</span> 
    <span class="token keyword keyword-double">double</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// системният конструктор по подразбиране ще инициализра с тези стойности </span>
    <span class="token keyword keyword-double">double</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span> 
    <span class="token function">Point2D</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Point2D("</span> <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">", "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">")\n"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Point2D <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="управление-на-динамичната-памет-и-ресурситеraii">Управление на динамичната памет и ресурсите(RAII) </h3>
<p><em><strong>Жизнен цикъл на обект</strong></em></p>
<ul>
<li>за обекта се заделя памет и се свързва с неговото име, извиква се подходящ конструктор на обекта</li>
<li>работа с обекта - достъп до компоненти на обект, изпълняване на операции</li>
<li>достига се края на областта на действие на обекта</li>
<li>извиква се деструкторът на обекта</li>
<li>заделената за обекта памет се освобождава</li>
</ul>
<p><u><strong>Дефиниране на деструктор</strong></u></p>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token operator">&lt;</span>име<span class="token operator">-</span>на<span class="token operator">-</span>клас<span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token operator">&lt;</span>име<span class="token operator">-</span>на<span class="token operator">-</span>клас<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>тяло<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre><p>Всеки клас може да има <strong>точно един</strong> деструктор, а ако не бъде дефиниран явно, се дефинира системен такъв с празно тяло. Съществено е, че ако обектът използва динамично заделен външен ресурс, то системният десктруктор няма да я освободи.</p>
<p>Това е идеята на <strong>RAII</strong>(Resourse Acquisition Is Initialization) стратегията за управлението на ресурсите и жизнения цикъл на обектите в в C++. <em><strong>Ако обект използва външна памет и ресурси, то техния жизнен цикъл е обвързан с жизнения цикъл на обекта.</strong></em></p>
<p>Когато се стигне до края на областта на действие на обекта:</p>
<ul>
<li>вика се неговия деструктор</li>
<li>изпълнява се тялото му</li>
<li>деструкторите на полетата, които са обекти, се извикват неявно в ред, обратен на реда им на конструиране</li>
<li>тогава вече обектът се счита за унищожен</li>
</ul>
<h3 id="методи---декларация-предаване-на-параметри-връщане-на-резултат">Методи - декларация, предаване на параметри, връщане на резултат. </h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token operator">&lt;</span>тип на връщане<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>име<span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>параметри<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><ul>
<li>Член-функциите имат достъп до всички полета на класа.</li>
<li>Член-функциите се преобразуват до външни ф-ии с един доп. парам. <code>this</code> - указател към текущия обект(обекта, от който е извикана функцията).</li>
</ul>
<p>Тъй като те са функции, това което важи за функциите в C++ относно предаване на параметри и връщане на резултат, е в сила и за методите.</p>
<p>Можем да разгледаме няколко вида методи:</p>
<ul>
<li><strong>конструктори</strong> - функции за построяване на обекти</li>
<li><strong>селектори</strong> - функции за достъп до компоненти на обекти; обикновено връщат const reference или указател към съответния атрибут или копие на стойността</li>
<li><strong>мутатори</strong> - функции за промяна на състояние на обекти, но под контрол</li>
</ul>
<h2 id="наследяване-производни-и-вложени-класове-достъп-до-наследените-компоненти-капсулация-и-скриване-на-информацията-статични-полета-и-методи">Наследяване. Производни и вложени класове. Достъп до наследените компоненти. Капсулация и скриване на информацията. Статични полета и методи. </h2>
<h3 id="наследяване">Наследяване </h3>
<p>Има различни начини за получаване на данните и поведението на друг клас.<br>
Един по-прост такъв е влагането(композиция) - напр. класът A съдържа обект от класа B като поле. Тогава отношението е от типа <em><strong>has-a</strong></em>.</p>
<p>// Ако се има предвид nesting - класът B е вложен в класът A, когато е дефиниран в рамките на A.</p>
<p>Друг е наследяването, в C++ механизмът е class-based inheritance, който поражда <em><strong>is-a</strong></em> отношение между производни(детски, наследници) и родителски(базови, основи) класове.<br>
Класът-наследник получава всички член-данни и методи на родителя.</p>
<p>Дефинирането на компоненти, чието име съвпада с компонента на основен клас, наричаме <strong>предефиниране</strong>.</p>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Der</span><span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">Base</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="uдостъп-до-наследените-компонентиu"><u><em><strong>Достъп до наследените компоненти</strong></em></u>: </h4>
<p>Модификатори за достъп на членове на клас</p>
<ul>
<li><code>private</code> - достъп само в класа</li>
<li><code>protected</code> - достъп само в класа и наследниците</li>
<li><code>public</code> - външен и вътрешен достъп</li>
</ul>
<p><u><em><strong>Видове наследяване</strong></em></u><br>
3 вида наследяване - public/private/protected<br>
Ще ги илюстрираме с пример на C++:</p>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span> <span class="token comment">// by default - private in classes, public in structs</span>
    <span class="token keyword keyword-int">int</span> x<span class="token punctuation">;</span>
<span class="token keyword keyword-protected">protected</span><span class="token operator">:</span> 
    <span class="token keyword keyword-int">int</span> y<span class="token punctuation">;</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span> 
    <span class="token keyword keyword-int">int</span> z<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">B</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">A</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// x is public</span>
    <span class="token comment">// y is protected</span>
    <span class="token comment">// z is not accessible from B</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">C</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-protected">protected</span> <span class="token class-name">A</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// x is protected</span>
    <span class="token comment">// y is protected</span>
    <span class="token comment">// z is not accessible from C</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">D</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-private">private</span> <span class="token class-name">A</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// x is private</span>
    <span class="token comment">// y is private</span>
    <span class="token comment">// z is not accessible from D</span>
<span class="token punctuation">}</span>


</code></pre><h4 id="капсулация-и-скриване-на-информация">Капсулация и скриване на информация </h4>
<p>Принципът на капсулацията е, че се разделя описанието на типа данни от конкретната му реализация. Обектите скриват вътрешното си състояние - данните от които се състоят, връзките между тях и как те си взаимодействат. Само самите обекти могат да модифицират състоянието си директно, запазвайки инварианта на структурата данни. Осъществява се чрез групиране на данни и функции в клас и с модификаторите за достъп.</p>
<h3 id="статични-полета-и-методи">Статични полета и методи </h3>
<p>Статични полета и методи</p>
<ul>
<li>полета и методи, които не са обвързани с конкретен обект, но смислово са обвързани с класа(т.е. не зависят от <strong>this</strong> указател).</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span> 
    <span class="token keyword keyword-int">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> b<span class="token punctuation">;</span> <span class="token comment">// обща за всички обекти от класа, жизнен цикъл като на глобална променлива</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-int">int</span> Test<span class="token double-colon punctuation">::</span>b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
Test<span class="token double-colon punctuation">::</span>b<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token class-name">Test</span><span class="token double-colon punctuation">::</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// можем и през обекти да ги достъпваме(съгласно спецификаторите за достъп), но те пак няма да зависят от this</span>
</code></pre>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>